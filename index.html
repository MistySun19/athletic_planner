<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>训练计划表格制作</title>
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <header class="top-bar">
    <h1>训练计划表格制作</h1>
    <nav>
      <a href="index.html">表格制作</a>
      <a href="database.html">数据库管理</a>
      <a href="students.html">学生管理</a>
      <a href="admin.html" id="admin-link" class="hidden">管理员面板</a>
      <button id="request-admin" type="button" class="secondary hidden">申请管理员</button>
      <button id="sign-out" type="button">退出登录</button>
    </nav>
  </header>

  <main class="page">
    <div class="tab-bar">
      <button class="tab-btn active" data-tab="general">中周期</button>
      <button class="tab-btn" data-tab="weekly">周计划</button>
      <button class="tab-btn" data-tab="macro">总计划</button>
    </div>

    <section class="tab-panel active" data-panel="general">
      <section class="controls">
        <div class="control-group">
          <label for="week-count">训练周数：</label>
          <input type="number" id="week-count" min="1" value="4" />
          <button id="set-weeks">调整周数</button>
          <button id="add-week">新增一周</button>
        </div>
        <div class="control-group">
          <label for="day-count">每日数：</label>
          <input type="number" id="day-count" min="1" value="5" />
          <button id="set-days">调整天数</button>
          <button id="add-day">新增一天</button>
        </div>
        <p class="tip">训练类型与动作数据来自数据库页，先在<a href="database.html">这里</a>维护数据。</p>
      </section>

      <section class="schedule-wrapper">
        <div id="days-container" class="days-container"></div>
      </section>
    </section>

    <section class="tab-panel" data-panel="weekly">
      <section class="weekly-card">
        <header class="weekly-header">
          <div class="week-input-group">
            <label for="weekly-week">选择周：</label>
            <input type="number" id="weekly-week" min="1" value="1" />
          </div>
          <div class="week-nav">
            <button id="weekly-prev" type="button">上一周</button>
            <button id="weekly-next" type="button">下一周</button>
          </div>
        </header>

        <section class="student-manager">
          <form class="bind-form" id="bind-form">
            <label>
              学生邮箱
              <input
                type="email"
                id="student-email"
                placeholder="student@example.com"
                required
              />
            </label>
            <button id="bind-student" type="submit">添加学生</button>
          </form>
          <p id="student-bind-message" class="tip" role="status" aria-live="polite"></p>
          <label class="student-select">
            当前学生
            <select id="student-select">
              <option value="">请选择学生</option>
            </select>
          </label>
          <p id="student-select-message" class="tip" role="status" aria-live="polite"></p>
          <div id="student-list" class="student-list"></div>
          <div class="student-actions">
            <button id="publish-week" type="button">发布当前学生周计划</button>
          </div>
        </section>

        <div id="weekly-container" class="weekly-container"></div>
      </section>
    </section>

    <section class="tab-panel" data-panel="macro">
      <section class="macro-card">
        <h2>总计划（Google Sheet）</h2>
        <div class="sheet-embed-wrapper">
          <iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vSOYNJRE6wtwOJ2u-ZWKdissfOsgUxEmfVRD8YFzoaS0a3APvPUM_lNNxTAuNyzH76G-eeRIPmtYLWG/pubhtml?widget=true&amp;headers=false" loading="lazy"></iframe>
        </div>
      </section>
    </section>
  </main>
  <script type="module" src="js/index.js"></script>
</body>
</html>
